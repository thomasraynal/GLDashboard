/**
 * GLDashboard - 1.0.0.0
 */

"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.GlDashboard||(window.GlDashboard={}),window.GlDashboard.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},angular.module("glDashboardTemplates",[]),glDashboard.constant("glDashboardEvents",{afterLayoutChanged:"afterLayoutChanged",beforeLayoutChanged:"beforeLayoutChanged",customWidgetCreated:"customWidgetCreated",customWidgetDeleted:"customWidgetDeleted"}),glDashboard.controller("bindable",["$scope",function(n){n.onEvent=function(e,t){n.container.layoutManager.on(e,t),n.container.layoutManager.on(e,function(){n.$digest()})}}]),glDashboard.controller("widget",["$scope","$timeout","$q","container","workspace","error",function(n,a,t,e,o,i){n.workspace=o,n.container=e,n.name=e._config.componentState.name,n.config=e._config.componentState.config,n.isLoading=!1,n.$watch("isLoading",function(){n.isLoading?n.container._element.addClass("disable"):n.container._element.removeClass("disable")}),n.doUiWork=function(e,t){return n.disable(),(e.then?e:a(function(){return e()})).then(function(e){return null!=t&&t(e),n.enable(),e}).catch(function(e){n.workspace.currentError=i.createError(e),n.workspace.showErrorPopup=!0,n.workspace.$digest(),n.enable()})},n.changeName=function(e){n.config.title=e,n.container.setTitle(e)},n.height=function(){return n.container._element.height()},n.width=function(){return n.container._element.width()},n.disable=function(){n.isLoading=!0},n.enable=function(){n.isLoading=!1},n.initialize=function(){return(e=t.defer()).resolve(),e.promise;var e},a(function(){n.initialize()})}]),glDashboard.controller("workspace",["$scope","$log","$templateRequest","$templateCache","$timeout","$routeParams","$q","$window","$document","error","widgets","layouts","glDashboardEvents","Save","Context","customWidgets","glDashboardKeyLabel","glDashboardCategoryLabel",function(i,t,a,o,n,r,s,e,l,u,d,c,p,g,m,y,f,h){var v;function w(){i.isLoading=!0}function b(){i.isLoading=!1}function x(){return i.$workspaceContainer.height($(window).height()),i.$workspaceContainer.width($(window).width()),B()}function L(e){var t=_.transform(e,function(e,t){var n=t;t.then||(n=B(t)),e.push(n)},[]);return s.all(t).catch(function(e){i.currentError=u.createError(e),i.showErrorPopup=!0,b()})}function O(){return L(i.onStartupHandlers)}function C(){return L(i.onInitializedHandlers)}function D(e,t){try{var n=e.getElement(),a=o.get(t.templateUrl);n.html(a),angular.module(t.module).value("container",e).value("workspace",i),angular.bootstrap(n[0],[t.module])}catch(e){i.currentError=u.createError(e),i.showErrorPopup=!0,b()}}function S(){GlDashboard.isUndefinedOrNull(i.goldenLayout)||i.goldenLayout.destroy();var e=i.context.layout;return e.settings.showPopoutIcon=!1,e.content[0].isClosable=!1,i.goldenLayout=new GoldenLayout(e,i.$workspaceContainer),i.goldenLayout.registerComponent("angularModule",D),i.goldenLayout.init(),B()}function A(){return i.doUiWork(GlDashboard.isUndefinedOrNull(i.context)?B():c.getLayout(i.context.layoutKey)).then(function(e){return GlDashboard.isUndefinedOrNull(e)?i.doUiWork(GlDashboard.isUndefinedOrNull(i.context)?B():c.getLayout(i.context.layoutCategory)).then(function(e){return N(e)}):N(e)})}function N(e){return E(e).then(S).then(function(){T(),T()})}function k(){return d.getWidgets().then(function(e){var n=[];return _.each(e,function(e){var t=s.defer();n.push(a(e.templateUrl)),$script(e.moduleUrl,function(){return t.resolve()}),n.push(t.promise)}),s.all(n)})}function E(e){var t=r[f],n=r[h];return GlDashboard.isUndefinedOrNull(e)?i.context=new m(t,n):e.isAction||e.isScreen?i.context=new m(e.layoutKey,n,e.isScreen,e.isAction,e.layout):i.context=new m(t,n,!1,!1,e.layout),B()}function M(){angular.element(e).bind("resize",function(){T()})}function W(e){return d.getWidget(e).then(function(e){i.goldenLayout.root.contentItems[0].addChild(e)})}function U(e,t,n,a){var o=new m(e,t,n,a,i.goldenLayout.toConfig());return i.goldenLayout.emit(p.beforeLayoutChanged),i.doUiWork(c.saveLayout(o)).then(function(e){i.goldenLayout.emit(p.afterLayoutChanged)})}function B(e){var t=s.defer();return e&&e(),t.resolve(),t.promise}function T(){n(function(){var e=$("#workspaceMenu");i.$workspaceContainer.offset({top:e.height(),left:0}),i.$workspaceContainer.height($(window).height()-e.height()),i.$workspaceContainer.width($(window).width()),i.goldenLayout.updateSize()})}i.context,i.onInitializedHandlers=[],i.onStartupHandlers=[],i.isLoading=!1,i.$workspaceContainer=$("#workspaceContainer"),i.isFullScreen,i.showNamedLayoutManagement=!1,i.showCurrentUser=!1,i.isSaveLayoutDefaultDisabled,i.availableWidgets=[],i.showErrorPopup=!1,i.currentError,i.saveContextAsScreenOrActionVisible=!1,i.saveContextAsScreenOrActionLabel=null,i.errorPopup=(_defineProperty(v={contentTemplate:"info",width:600,height:500,showTitle:!1,dragEnabled:!1},"showTitle",!0),_defineProperty(v,"title","An error has occured"),_defineProperty(v,"closeOnOutsideClick",!0),_defineProperty(v,"bindingOptions",{visible:"showErrorPopup"}),v),i.errorDetails={height:350,bindingOptions:{value:"currentError.details"}},i.$watch("context",function(){null!=i.context?(i.context.isAction||i.context.isScreen?i.saveContextAsScreenOrActionLabel="Save ["+i.context.layoutKey+"]":i.saveContextAsScreenOrActionLabel=null,i.isSaveLayoutDefaultDisabled=GlDashboard.isUndefinedOrNull(i.context.layoutKey)||i.context.isAction||i.context.isScreen):i.saveContextAsScreenOrActionLabel=null}),i.$watch("saveContextAsScreenOrActionLabel",function(){i.saveContextAsScreenOrActionVisible=null!=i.saveContextAsScreenOrActionLabel}),i.$on("$destroy",function(){i.goldenLayout.destroy()}),i.widgetMenuOptions={bindingOptions:{dataSource:"availableWidgets"},hideSubmenuOnMouseLeave:!0,displayExpr:"name",onItemClick:function(e){"category"!=e.itemData.type&&("custom-widget"==e.itemData.type?y.showCustomWidget(i,e.itemData.customWidget):W(e.itemData.name))}},i.onInitialized=function(e){i.onInitializedHandlers.push(e)},i.onStartup=function(e){i.onStartupHandlers.push(e)},i.doUiWork=function(e,t){return w(),(e.then?e:n(function(){return e()})).then(function(e){return null!=t&&t(e),b(),e}).catch(function(e){i.currentError=u.createError(e),i.showErrorPopup=!0,GlDashboard.isUndefinedOrNull(i.workspace)||i.workspace.$digest(),b()})},i.saveLayout=U,i.saveLayoutAsDefault=function(){return U(i.context.layoutKey,i.context.layoutCategory,!1,!1)},i.saveLayoutAsDefaultForCategory=function(){return U(null,i.context.layoutCategory,!1,!1)},i.changeContext=E,i.addWidget=W,i.changeLayout=function(e){i.doUiWork(c.getLayout(e)).then(E).then(S)},i.clearLayout=function(){_.each($(".gld_widget"),function(e){return angular.element(e).scope().container.close()})},i.reload=A,n(function(){n(function(){return w()}).then(x).then(M).then(E).then(O).then(k).then(A).then(C).then(b).catch(function(e){t.error(e),i.currentError=u.createError(e),i.showErrorPopup=!0,b()})})}]),glDashboard.directive("workspaceMenuActionsAndScreens",["layouts","glDashboardEvents",function(a,o){return{restrict:"E",templateUrl:"view.menu.actions.and.screens.html",controller:["$scope",function(t){function n(){a.getAvailableActions().then(function(e){t.actions=[{name:"Actions",type:"category",items:_.transform(e,function(e,t){return e.push({name:t,type:"action"})},[])}]}),a.getAvailableScreens().then(function(e){t.screens=[{name:"Screens",type:"category",items:_.transform(e,function(e,t){return e.push({name:t,type:"screen"})},[])}]})}function e(e){"category"!=e.itemData.type&&t.changeLayout(e.itemData.name)}t.onInitialized(function(){n(),t.goldenLayout.on(o.afterLayoutChanged,function(e){n()})}),t.actions=[],t.screens=[],t.actionMenuOptions={bindingOptions:{dataSource:"actions"},hideSubmenuOnMouseLeave:!0,displayExpr:"name",onItemClick:e},t.screenMenuOptions={bindingOptions:{dataSource:"screens"},hideSubmenuOnMouseLeave:!0,displayExpr:"name",onItemClick:e}}]}}]),glDashboard.directive("workspaceMenuAppName",function(){return{restrict:"E",templateUrl:"view.menu.app.name.html",link:function(e){}}}),glDashboard.directive("workspaceMenuLayoutClear",["layouts",function(e){return{restrict:"E",templateUrl:"view.menu.layout.clear.html",controller:["$scope",function(t){t.clearLayoutButtonOptions={icon:"trash",hint:"Clear Layout",onClick:function(e){t.clearLayout()}}}]}}]),glDashboard.directive("workspaceMenuLayoutManagement",["layouts","glDashboardEvents",function(n,o){return{restrict:"E",templateUrl:"view.menu.layout.management.html",controller:["$scope",function(a){function e(){a.showLayoutManagement&&(a.selectedLayout=null,a.newLayoutName="",n.getAvailableLayouts().then(function(e){a.availableLayouts=_.transform(e,function(e,t){var n="DEFAULT";t.isAction&&(n="ACTION"),t.isScreen&&(n="SCREEN"),t.isAction||t.isScreen||t.isDefault||(n="DEFAULT (USER)"),t.isAction||t.isScreen||!t.isDefault||(n="DEFAULT"),e.push({category:n,isDefault:t.isDefault,layout:t,name:GlDashboard.isUndefinedOrNull(t.layoutKey)?t.layoutCategory:t.layoutKey})},[])}).catch(function(e){$log.error(e)}))}a.showLayoutManagement=!1,a.newLayoutName="",a.selectedLayout,a.isLayoutManagementDisabled,a.isDeleteLayoutDisabled,a.availableLayouts=[],a.$watch("selectedLayout",function(){a.isLayoutManagementDisabled=null==a.selectedLayout,a.isDeleteLayoutDisabled=a.isLayoutManagementDisabled||a.selectedLayout.isDefault}),a.$watch("newLayoutName",function(){a.isSaveLayoutDisabled=GlDashboard.isUndefinedOrNull(a.newLayoutName)||""==a.newLayoutName}),a.$watch("showLayoutManagement",function(){e()}),a.textBoxNewLayoutOptions={bindingOptions:{value:"newLayoutName"},showClearButton:!0,placeholder:"Enter layout name...",onInput:function(e){a.newLayoutName=e.component._options.text}},a.layoutManagementGridBoxOptions={bindingOptions:{value:"selectedLayout.name",dataSource:"availableLayouts"},valueExpr:"name",placeholder:"Select a layout...",displayExpr:function(e){return e&&e.name+" ["+e.category+"]"},showClearButton:!0,dataGrid:{bindingOptions:{dataSource:"availableLayouts"},columns:["name","category"],hoverStateEnabled:!0,filterRow:{visible:!0},scrolling:{mode:"infinite"},selection:{mode:"single"},height:300,onSelectionChanged:function(e){var t=e.selectedRowKeys;a.selectedLayout=t.length&&t[0]||null,$("#layoutManagementGridBox").dxDropDownBox("instance").close()}}},a.saveLayoutAsScreenButtonOptions={icon:"floppy",text:"Save As Screen",bindingOptions:{disabled:"isSaveLayoutDisabled"},onClick:function(e){a.saveLayout(a.newLayoutName,a.context.layoutKey,!0,!1).then(function(){a.showLayoutManagement=!1})}},a.saveLayoutAsActionButtonOptions={icon:"floppy",text:"Save As Action",bindingOptions:{disabled:"isSaveLayoutDisabled"},onClick:function(e){a.saveLayout(a.newLayoutName,a.context.layoutKey,!1,!0).then(function(){a.showLayoutManagement=!1})}},a.loadLayoutButtonOptions={icon:"upload",text:"Load",bindingOptions:{disabled:"isLayoutManagementDisabled"},onClick:function(e){a.changeLayout(a.selectedLayout.name),a.showLayoutManagement=!1}},a.deleteLayoutButtonOptions={icon:"trash",text:"Delete",bindingOptions:{disabled:"isDeleteLayoutDisabled"},onClick:function(e){var t;t=a.selectedLayout.layout,a.doUiWork(n.deleteLayout(t)).then(function(e){a.goldenLayout.emit(o.afterLayoutChanged)}),a.showLayoutManagement=!1}},a.saveLayoutAsFileButtonOptions={icon:"floppy",text:"Save As File",onClick:function(e){var t=JSON.stringify(a.goldenLayout.toConfig()),n=a.context.layoutKey?a.context.layoutKey+"_"+a.context.layoutCategory:a.context.layoutCategory;new Save(n,".layout",t),a.showLayoutManagement=!1}},a.layoutManagementButtonOptions={icon:"image",hint:"Show Layout Management Panel",onClick:function(e){a.showLayoutManagement=!0}},a.layoutManagementPopupOptions={width:300,height:375,showTitle:!0,title:"Layout Management",dragEnabled:!1,closeOnOutsideClick:!0,bindingOptions:{visible:"showLayoutManagement"}},a.loadLayoutFromFileUploadOptions={icon:"upload",selectButtonText:"Load From File",labelText:"",accept:".layout",uploadMode:"instantly",onValueChanged:function(e){if(0!=e.value.length){var t=e.value[0],n=new FileReader;n.onload=function(e){var t=$("#loadLayoutFromFileInput").dxFileUploader("instance"),n=JSON.parse(e.target.result);a.context.layout=n,initGoldenLayout().then(function(){t.reset()})},n.readAsBinaryString(t),a.showLayoutManagement=!1}}},a.showLayoutManagementPopup=e}]}}]),glDashboard.directive("workspaceMenuLayoutSave",function(){return{restrict:"E",templateUrl:"view.menu.layout.save.html",controller:["$scope",function(e){e.saveLayoutDefaultButtonOptions={icon:"floppy",bindingOptions:{text:"context.layoutKey",disabled:"isSaveLayoutDefaultDisabled"},onClick:e.saveLayoutAsDefault},e.saveLayoutTagButtonOptions={icon:"floppy",bindingOptions:{text:"context.layoutCategory"},onClick:e.saveLayoutAsDefaultForCategory}}]}}),glDashboard.directive("workspaceMenuLayoutSaveScreenOrAction",function(){return{restrict:"E",templateUrl:"view.menu.layout.save.screen.or.action.html",controller:["$scope",function(t){t.saveLayoutAsScreenOrActionButtonOptions={icon:"floppy",bindingOptions:{text:"saveContextAsScreenOrActionLabel",visible:"saveContextAsScreenOrActionVisible"},onClick:function(e){saveLayout(t.context.layoutKey,t.context.layoutKey,t.context.isScreen,t.context.isAction)}}}]}}),glDashboard.directive("workspaceMenuWidgets",["widgets","glDashboardEvents","customWidgets",function(n,a,o){return{restrict:"E",templateUrl:"view.menu.widgets.html",controller:["$scope","$timeout",function(u,e){function t(){return n.getWidgets().then(function(e){var t=function(s){var l=[],e=_.transform(s,function(e,t){_.find(e,function(e){return e===t.category})||""!=t.category&&e.push(t.category)},[]);_.each(e,function(e){var i=null,t=e.split(";"),r=null;_.each(t,function(t){r=null==r?t:r+";"+t;var e=null!=_.find(l,function(e){return e.name===t});if(GlDashboard.isUndefinedOrNull(i)&&!e)i={name:t,gl_template:null,type:"category",disabled:!1,config:null,items:[]},l.push(i);else{var n=null;if(e)i=n=_.find(l,function(e){return e.name===t});else{n=_.find(i.items,function(e){return e.name===t});var a={name:t,gl_template:null,type:"category",disabled:!1,config:null,items:[]};null==n?i.items.push(a):n.items.push(a),i=a}}var o=_.filter(s,function(e){return e.category===r});_.each(o,function(t){_.find(i.items,function(e){return t.name===e.name})||i.items.push({name:t.name,gl_template:t.template,type:"widget",disabled:!u.context.enableWidget(t),config:null==t.config?{}:t.config})})})});var t=o.getAvailableTemplates();if(!GlDashboard.isUndefinedOrNull(t)&&0<t.length){var n={name:"My Widgets",type:"category",items:_.transform(t,function(e,t){return e.push({name:t.name,disabled:GlDashboard.isUndefinedOrNull(u.context.layoutKey),type:"custom-widget",customWidget:t})})};l.push(n)}return l}(e);u.availableWidgets=[{name:"Widgets",type:"category",items:t}]})}u.onInitialized(function(){t(),u.goldenLayout.on(a.customWidgetCreated,function(){t()}),u.goldenLayout.on(a.customWidgetDeleted,function(){t()})})}]}}]),glDashboard.directive("workspaceMenu",function(){return{restrict:"E",templateUrl:"plugins/html/view.menu.html",link:function(e){}}}),glDashboard.directive("changeWidgetName",function(){return{restrict:"E",templateUrl:"view.widget.name.html",link:function(t){t.showChangeWidgetnamePopup=!1,t.widgetNewName=t.config.title,t.cannotValidateWidgetNameChange=!0,t.changeWidgetNameButtonOptions={icon:"edit",onClick:function(e){t.widgetNewName=t.config.title,t.showChangeWidgetnamePopup=!0}},t.$watch("widgetNewName",function(){t.cannotValidateWidgetNameChange=""==t.widgetNewName}),t.widgetNameTextBoxOptions={bindingOptions:{value:"widgetNewName"},onInput:function(e){t.cannotValidateWidgetNameChange=""==e.component._options.text},showClearButton:!0},t.changeWidgetNamePopupOptions={width:350,contentTemplate:"info",height:"auto",dragEnabled:!0,showTitle:!0,title:"Change widget name",closeOnOutsideClick:!0,bindingOptions:{visible:"showChangeWidgetnamePopup"}},t.validateChangeNameButtonOptions={text:"Change name",bindingOptions:{disabled:"cannotValidateWidgetNameChange"},onClick:function(){t.changeName(t.widgetNewName),t.showChangeWidgetnamePopup=!1}}}}}),glDashboard.factory("Save",function(){return function(e,t,n,a){saveAs(new Blob([function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0;a!=e.length;++a)n[a]=255&e.charCodeAt(a);return t}(n)],{type:a||"application/octet-stream"}),e+t)}}),angular.module("glDashboardTemplates").run(["$templateCache",function(e){e.put("view.menu.actions.and.screens.html",'    <div class="menu-item" dx-menu="actionMenuOptions"></div>\r\n    <div class="menu-item" dx-menu="screenMenuOptions"></div>'),e.put("view.menu.app.name.html",'<a style="color: transparent!important;" ng-href="#/"><img style="margin-left:0px" class="menu-item" src={{appIcon}}></img>\r\n</a>\r\n<div class="menu-item-align">{{appName}}</div>\r\n<div class="menu-item-align">v.{{appVersion}}</div>\r\n<div class="menu-item-align">{{fund}}</div>\r\n'),e.put("view.menu.layout.clear.html",'<div class="icon-menu-item" dx-button="clearLayoutButtonOptions"></div>'),e.put("view.menu.layout.management.html",'<div class="menu-item" dx-button="layoutManagementButtonOptions">\r\n</div>\r\n<div id="layoutManagementPopup" class="popup" dx-popup="layoutManagementPopupOptions">\r\n    <div>\r\n        <div class="dx-fieldset">\r\n            <div class="dx-fieldset-header">Create a named layout</div>\r\n            <div class="dx-field">\r\n                <div style="width:100%;min-height:30px;margin-top: 5px;">\r\n                    <div style="width:250px;" dx-text-box="textBoxNewLayoutOptions"></div>\r\n                </div>\r\n            </div>\r\n            <div class="dx-field">\r\n                <div style="width:100%;min-height:30px;margin-top: 5px;">\r\n                    <div dx-button="saveLayoutAsScreenButtonOptions"></div>\r\n                    <div dx-button="saveLayoutAsActionButtonOptions"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="dx-fieldset">\r\n            <div class="dx-fieldset-header">Create or load a serialized layout</div>\r\n            <div class="dx-field">\r\n                <div style="width:100%;min-height:30px;margin-top: 5px;">\r\n                    <div style="float:left;width:125px;" dx-button="saveLayoutAsFileButtonOptions"></div>\r\n                    <div style="float:left;width:125px;margin-top: -7px;" class="menu-item" id="loadLayoutFromFileInput" dx-file-uploader="loadLayoutFromFileUploadOptions"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="dx-fieldset">\r\n            <div class="dx-fieldset-header">Manage existing layouts</div>\r\n            <div class="dx-field">\r\n                <div>\r\n                    <div id="layoutManagementGridBox" dx-drop-down-box="layoutManagementGridBoxOptions">\r\n                        <div data-options="dxTemplate: { name: \'content\' }">\r\n                            <div dx-data-grid="layoutManagementGridBoxOptions.dataGrid"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div style="margin-top:10px;">\r\n                        <div style="width:125px;" dx-button="loadLayoutButtonOptions"></div>\r\n                        <div style="width:125px" dx-button="deleteLayoutButtonOptions"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("view.menu.layout.save.html",'<div class="menu-item" dx-button="saveLayoutDefaultButtonOptions"></div>\r\n<div class="menu-item" dx-button="saveLayoutTagButtonOptions"></div>\r\n'),e.put("view.menu.layout.save.screen.or.action.html",'<div class="menu-item" dx-button="saveLayoutAsScreenOrActionButtonOptions"></div>\r\n'),e.put("view.menu.widgets.html",'<div class="menu-item" dx-menu="widgetMenuOptions"></div>\r\n'),e.put("view.widget.name.html",'<div class="menu-item" dx-button="changeWidgetNameButtonOptions"></div>\r\n<div class="popup" dx-popup="changeWidgetNamePopupOptions">\r\n    <div data-options="dxTemplate: { name: \'info\' } ">\r\n        <div style="margin-top:10px;" dx-text-box="widgetNameTextBoxOptions"></div>\r\n        <div style="width:100%;margin-top:10px;min-height:30px; ">\r\n            <div style="width:100%;margin:0px" dx-button="validateChangeNameButtonOptions"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("view.workspace.html",'<div ng-class="{disable: isLoading}">\r\n    <workspace-menu></workspace-menu>\r\n    <div id="workspaceContainer" class="gld_workspace_container"></div>\r\n    <div class="popup" dx-popup="errorPopup">\r\n        <div data-options="dxTemplate: { name:\'info\' }">\r\n            <div class="dx-fieldset">\r\n                <div class="dx-field">\r\n                    <div class="dx-field-label">Type</div>\r\n                    <div class="dx-field-value">\r\n                        {{currentError.status}}\r\n                    </div>\r\n                </div>\r\n                <div class="dx-field">\r\n                    <div class="dx-field-label">Message</div>\r\n                    <div class="dx-field-value">\r\n                        {{currentError.message}}\r\n                    </div>\r\n                </div>\r\n                <div class="dx-field">\r\n                    <div class="dx-field-label">Detail</div>\r\n                    <div class="dx-field-value">\r\n                        <div dx-text-area="errorDetails"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n')}]),glDashboard.service("error",function(){this.createError=function(e){var t={status:"",message:"",details:"",inner:null};return(t.inner=e)instanceof Error?(t.status="An error has occured",t.message=e.message,t.details=e.stack):e.hasOwnProperty("statusText")&&e.hasOwnProperty("data")?null!=e.data?(t.status=e.statusText,t.message=e.data.message,t.details=JSON.stringify(e.data)):(t.status="HTTP error - see trace for details",t.message="An error has occured",t.details=JSON.stringify(e.config)):t.details=e,t}}),glDashboard.constant("oneDbTemplates","oneDbTemplates").service("customWidgets",["$q","oneDbTemplates",function(e,n){function a(){var e=localStorage.getItem(n);return null==e||""==e?[]:JSON.parse(localStorage.getItem(n))}function o(t){var e=a();_.remove(e,function(e){return e.name==t.name}),localStorage.setItem(n,JSON.stringify(e))}this.getAvailableTemplates=a,this.saveTemplate=function(e){o(e);var t=a();t.push(e),localStorage.setItem(n,JSON.stringify(t))},this.deleteTemplate=o,this.showCustomWidget=function(e,t){DevExpress.ui.dialog.alert("Show custom widget logic not implemented")}}]);